<%= javascript_include_tag "questions.js" %>

<div class="container-fluid">
	<div class="row top-question" data-id="<%= @question.id %>">
		<div class="col-md-6">
			<h4><%= @question.question %></h4>
		</div>
		<div class="col-md-7">
			<p class="pull-right">Asked by <%= @question.user.displayname %></p>
		</div>
	</div>
	<div class="answers-<%= @question.id %>">
		<ul class="media-list">
			<% @question.questions.each do |q| %>
				<li class="answer-<%=q.id%> media" data-id=<%=q.id%>>
				<div class="well well-sm media-body">
					<h5 class="question-heading media-heading" data-id=<%=q.id%>><%=q.question%></h5>
				</div>
				</li>
			<% end %>
		</ul>
	</div>
</div>

<script type="text/template" id="question-template">
	<div class="question-body" style="display:none;" >
		<p class="pull-right">Posted by {{=user.displayname}}</p>
		<div class="container-fluid answers-{{=id}}"> 
			<ul class="media-list">
				{{ _.each (questions, function (q) { }}
					<li class="answer-{{=q.id}} media" data-id={{=q.id}}>
					<div class="well well-sm media-body">
						<h5 class="question-heading media-heading" data-id={{=q.id}}>{{=q.question}}</h5>
					</div>
					</li>
					{{ }); }}
				{{ if (!questions.length) print("No responses yet"); }}
			</ul>
		</div>
		<a href="#" class="response-link">Post a response</a>
		<form id="response-form" class="form-inline" style="display:none;" role="form">
			<div id="response-data" class="form-group">
				<input type="text" class="form-control" id="response" placeholder="Enter response here" >
				<button type="button" class="response-save btn btn-primary">Save</button> 
			</div>
		</form>
	</div>
</script>
